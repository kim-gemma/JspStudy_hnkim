<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=Dongle&family=Gamja+Flower&family=Nanum+Myeongjo&family=Nanum+Pen+Script&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<body>
	<button type="button" onclick="" class="btn btn-secondary" id="btn1">data1.xml읽기</button>
	<button type="button" onclick="" class="btn btn-secondary" id="btn2">data1.json읽기</button>
	
	<br>
	<div id="result">결과출력</div>
	<script type="text/javascript">
	 /*
	    #btn1 클릭 시 실행되는 함수
	    - 사용자가 "xml 읽기" 버튼을 누르면
	    - 서버(또는 같은 폴더)의 data1.xml 파일을 비동기로 요청해서
	    - 받아온 xml을 파싱해서 result div에 출력
	  */
		$("#btn1").click(function() {
			//xml 읽기
		   // AJAX 요청 시작
			$.ajax({
			   /*
		          type: 요청 방식 (HTTP Method)
		          - 조회는 보통 GET
		          - 데이터 추가/수정은 보통 POST/PUT 등
		          - 여기서는 파일을 "읽기(조회)"니까 GET이 자연스러움
		        */
				type:"get",
			  	/*
		          url: 요청할 대상(주소)
		          - 같은 프로젝트/같은 경로에 data1.xml이 있어야 함
		          - 예: 현재 페이지와 같은 폴더면 "data1.xml"
		          - 다른 폴더면 "data/data1.xml" 이런 식으로 경로를 정확히 줘야 함
		        */
				url: "data1.xml", 
				dataType: "xml", //get방식은 100% json이다 
				//파라미터 넘겨질 것 :
				/*
		          success: 요청 성공(HTTP 200대) + dataType 파싱 성공했을 때 실행
		          - res: 서버가 준 응답(여기서는 xml 문서)
        		*/
				success:function(res){
					var data="City "+$(res).find("name").attr("city")+"<br/>";
					data+="Name: "+$(res).find("name").text()+"<br/>";
					data+="Age: "+$(res).find("age").text()+"<br/>";
					
					$("#result").html(data);
					
				},
			  	/*
		          statusCode: HTTP 상태코드별로 별도 처리
		          - 404: Not Found -> 파일/경로가 없을 때
		          - 500: Internal Server Error -> 서버쪽 에러(코드/설정 문제)
		        */
				statusCode:{
					404:function(){
						alert("파일을 찾을수 없음");
					},
					500: function(){
						alert("서버오류이지만 주로 코드 다시한번 볼것 오타!!")
					}
				},
				 /*
		          (추가로 있으면 좋은 것)
		          error: 통신은 갔는데 실패했을 때 더 자세히 찍기 좋음
		          - statusCode랑 비슷하지만, 에러 내용(xhr/status/error) 로그 찍기 가능
		        */
		        error: function(xhr, status, error) {
		          console.log("AJAX Error:", status, error);
		        }
			}); 
			
		
		});
		
		$("#btn2").click(function() {
			//json읽기
			$.ajax({
				type:"get",
				url: "data1.json", // JSON 읽기 예시 (data1.json 파일이 같은 폴더에 있다고 가정)
				dataType:"json", // 응답을 JSON으로 파싱해서 객체로 줌
				success:function(data){
					var s="";
					s+="이름: "+data.name+"<br/>";
					s+="주소: "+data.addr+"<br/>";
					s+="점수: "+data.score+"점<br/>";
					
					$("#result").html(s);
				},
				statusCode:{
					404:function(){
						alert("json파일을 찾을수없어요");
					},
					500:function(){
						alert("코드 다시 살펴볼것");
					}
				}
			});
		});
	
	</script>
</body>
</html>